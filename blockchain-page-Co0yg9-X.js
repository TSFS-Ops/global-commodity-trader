import{c as u,l as K,r as m,m as k,n as P,j as e,o as L,a3 as V,a4 as S,aR as B,at as D,p as I,I as R,B as w,L as W,aS as o,aT as n,aU as l,aV as d,S as x,b as T,F as h,G as C,M as Q,q as U,s as O,t as E,v as q,aW as Y}from"./index-DE3WvtMD.js";import{F as _}from"./file-check-D0L7z-oh.js";import{S as J}from"./shield-check-DSy28J7y.js";import{D as X}from"./database-BF2X_8bV.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=u("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=u("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=u("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);function ae({transactionHash:c,onVerified:i}){const{toast:f}=K(),[a,p]=m.useState(c||""),{data:r,isLoading:j,isError:H,error:g,refetch:A}=k({queryKey:["/api/blockchain/transactions",a],queryFn:async()=>{if(!a)throw new Error("Transaction hash is required");return await(await h("GET",`/api/blockchain/transactions/${a}`)).json()},enabled:!!a,retry:!1}),{data:t,isLoading:y,isError:F,error:v,refetch:M}=k({queryKey:["/api/blockchain/verify",a],queryFn:async()=>{if(!a)throw new Error("Transaction hash is required");return await(await h("GET",`/api/blockchain/verify/${a}`)).json()},enabled:!!a,retry:!1});m.useEffect(()=>{t&&i&&i(t.verified)},[t,i]),P({mutationFn:async s=>await(await h("POST","/api/blockchain/transactions",s)).json(),onSuccess:s=>{f({title:"Transaction saved to blockchain!",description:"Your transaction has been recorded and is now permanently on the blockchain."}),p(s.transactionHash),C.invalidateQueries({queryKey:["/api/blockchain/transactions",s.transactionHash]}),C.invalidateQueries({queryKey:["/api/blockchain/verify",s.transactionHash]})},onError:s=>{f({title:"Couldn't save transaction",description:`Something went wrong recording your transaction: ${s.message}. This might be a temporary network issue - please try again.`,variant:"destructive"})}});const $=()=>{A(),M()},G=s=>new Date(s*1e3).toLocaleString(),b=(s,N=6)=>s?`${s.substring(0,N)}...${s.substring(s.length-4)}`:"",z=`https://sepolia.etherscan.io/tx/${a}`;return e.jsxs(L,{className:"overflow-hidden",children:[e.jsxs(V,{className:"bg-primary/5",children:[e.jsxs(S,{className:"text-primary flex items-center",children:[e.jsx(B,{className:"mr-2 h-5 w-5"}),"Blockchain Verification"]}),e.jsx(D,{children:"Check if a transaction is legitimate using blockchain records - just paste the transaction ID below"})]}),e.jsx(I,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{placeholder:"Paste your transaction ID here (starts with 0x...)",value:a,onChange:s=>p(s.target.value),className:"flex-1"}),e.jsxs(w,{onClick:$,disabled:!a||y||j,children:[y||j?e.jsx(W,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(_,{className:"mr-2 h-4 w-4"}),"Check Transaction"]})]}),F&&e.jsxs(o,{variant:"destructive",children:[e.jsx(n,{className:"h-4 w-4"}),e.jsx(l,{children:"Couldn't Verify Transaction"}),e.jsx(d,{children:v instanceof Error?`Here's what went wrong: ${v.message}`:"We couldn't verify this transaction. Double-check that you copied the full transaction ID correctly, or try again in a moment."})]}),H&&e.jsxs(o,{variant:"destructive",children:[e.jsx(n,{className:"h-4 w-4"}),e.jsx(l,{children:"Transaction Not Found"}),e.jsx(d,{children:g instanceof Error?`Problem loading transaction: ${g.message}`:"We couldn't find this transaction on the blockchain. Make sure you have the complete transaction ID, or the transaction might still be processing."})]}),t&&e.jsxs(o,{variant:t.verified?"default":"destructive",className:t.verified?"border-green-500 bg-green-50":"",children:[t.verified?e.jsx(Z,{className:"h-4 w-4 text-green-600"}):e.jsx(n,{className:"h-4 w-4"}),e.jsx(l,{children:t.verified?"✓ Transaction Confirmed":"⚠️ Transaction Not Verified"}),e.jsx(d,{children:t.verified?"Great! This transaction is legitimate and has been confirmed on the blockchain.":"This transaction couldn't be verified. It might be too new (still processing), invalid, or from a different blockchain network."})]}),r&&e.jsxs("div",{className:"space-y-4 mt-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Transaction Details"}),e.jsx(x,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transaction Hash"}),e.jsx("p",{className:"font-mono text-sm break-all",children:r.transactionHash})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Block Number"}),e.jsx("p",{className:"font-mono",children:r.blockNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Timestamp"}),e.jsx("p",{children:G(r.timestamp)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"From"}),e.jsxs("p",{className:"font-mono text-sm",children:[r.from,e.jsx(T,{variant:"outline",className:"ml-2 text-xs",children:b(r.from)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"To"}),e.jsxs("p",{className:"font-mono text-sm",children:[r.to,e.jsx(T,{variant:"outline",className:"ml-2 text-xs",children:b(r.to)})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Value"}),e.jsxs("p",{className:"font-mono",children:[r.value," ETH"]})]})]})]}),e.jsx("div",{children:e.jsxs(w,{variant:"outline",className:"mt-2",onClick:()=>window.open(z,"_blank"),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"View on Blockchain Explorer"]})})]})]})})]})}function ce(){const[c,i]=m.useState("verify");return e.jsx(Q,{children:e.jsx("div",{className:"container py-8",children:e.jsxs("div",{className:"flex flex-col items-start gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold text-primary flex items-center",children:[e.jsx(B,{className:"mr-3 h-7 w-7"}),"Blockchain Transactions"]}),e.jsx("p",{className:"text-muted-foreground",children:"Verify and record transactions on the blockchain for transparency and trust in the cannabis marketplace"})]}),e.jsxs(U,{defaultValue:"verify",value:c,onValueChange:i,className:"w-full",children:[e.jsxs(O,{className:"grid w-full grid-cols-2",children:[e.jsx(E,{value:"verify",children:"Verify Transactions"}),e.jsx(E,{value:"about",children:"About Blockchain"})]}),e.jsx(q,{value:"verify",className:"mt-6",children:e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsx(ae,{})})}),e.jsx(q,{value:"about",className:"mt-6",children:e.jsxs(L,{className:"border-t-4 border-t-primary",children:[e.jsxs(V,{children:[e.jsx(S,{className:"text-xl text-primary",children:"What is Blockchain Verification?"}),e.jsx(D,{children:"Understanding how blockchain ensures transparency and trust in the cannabis industry"})]}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("p",{children:"Blockchain technology provides a secure, transparent and immutable record of transactions between buyers and sellers. This is particularly valuable in the cannabis industry where verification, compliance, and supply chain transparency are critical concerns."}),e.jsx(x,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsx("h3",{children:"Immutable Records"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Once a transaction is recorded on the blockchain, it cannot be altered or deleted, ensuring a permanent history of all transactions."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[e.jsx(Y,{className:"h-5 w-5"}),e.jsx("h3",{children:"Secure Transactions"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Every transaction is cryptographically secured, protecting sensitive data while still providing necessary verification."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("h3",{children:"Decentralized Storage"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Transaction data is stored across a network of computers, eliminating single points of failure and reducing the risk of data loss."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("h3",{children:"Supply Chain Verification"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track cannabis products from seed to sale with verifiable blockchain records, ensuring product authenticity and regulatory compliance."})]})]}),e.jsx(x,{}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx(n,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-800",children:"Important Note"}),e.jsx("p",{className:"text-sm text-amber-700",children:"The Izenzo platform uses blockchain technology in countries where cannabis trade is legal. Always ensure you're operating within your local regulatory framework. Blockchain records may be used for compliance verification by authorized parties."})]})]})]})})]})})]})]})})})}export{ce as default};
